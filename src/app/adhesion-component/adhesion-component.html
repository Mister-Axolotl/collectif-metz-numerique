<main class="adhesion-main">
    <div class="container">
        <h1>Adh√©sion Collectif Metz Num√©rique</h1>
        <p class="cotisation">Cotisation annuelle : <strong>15,00 ‚Ç¨</strong></p>

        <form [formGroup]="adhesionForm" (ngSubmit)="onSubmit()" novalidate>
            <!-- Informations personnelles -->
            <section class="form-section">
                <h2>üìã Informations personnelles</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">Pr√©nom <span class="required">*</span></label>
                        <input type="text" id="firstName" formControlName="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Nom <span class="required">*</span></label>
                        <input type="text" id="lastName" formControlName="lastName" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="email">Email <span class="required">*</span></label>
                        <input type="email" id="email" formControlName="email" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">T√©l√©phone</label>
                        <input type="tel" id="phone" formControlName="phone">
                    </div>
                </div>
                <div class="form-group">
                    <label for="birthDate">Date de naissance <span class="required">*</span></label>
                    <input type="date" id="birthDate" formControlName="birthDate" [max]="maxBirthDate" required>
                    <div class="legal-text">Vous devez avoir au moins 16 ans pour adh√©rer</div>
                </div>
            </section>

            <!-- Adresse -->
            <section class="form-section">
                <h2>üè† Adresse de r√©sidence</h2>
                <div class="form-group">
                    <label for="street">Adresse <span class="required">*</span></label>
                    <input type="text" id="street" formControlName="street" required placeholder="Num√©ro et nom de rue">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="postalCode">Code postal <span class="required">*</span></label>
                        <input type="text" id="postalCode" formControlName="postalCode" pattern="[0-9]{5}" required
                            (blur)="onPostalCodeBlur()">
                    </div>
                    <div class="form-group">
                        <label for="city">Ville <span class="required">*</span></label>
                        <input type="text" id="city" formControlName="city" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="country">Pays</label>
                    <input type="text" id="country" formControlName="country" readonly>
                </div>
            </section>

            <!-- Consentements RGPD -->
            <section class="form-section">
                <h2>üîí Protection des donn√©es personnelles</h2>
                <div class="checkbox-group">
                    <input type="checkbox" id="consentData" formControlName="consentData" required>
                    <label for="consentData">
                        J'accepte le traitement de mes donn√©es personnelles <span class="required">*</span>
                    </label>
                    <div class="legal-text">
                        Conform√©ment au RGPD, vos donn√©es personnelles sont collect√©es pour la gestion de votre
                        adh√©sion,
                        la communication des activit√©s de l'association et le respect des obligations l√©gales.
                        Vous disposez d'un droit d'acc√®s, de rectification, d'effacement et de portabilit√© de vos
                        donn√©es.
                        Contact : <strong>contact&#64;collectif-metz-numerique.fr</strong>
                    </div>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="consentAge" formControlName="consentAge" required>
                    <label for="consentAge">
                        Je certifie avoir au moins 16 ans <span class="required">*</span>
                    </label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="consentTerms" formControlName="consentTerms" required>
                    <label for="consentTerms">
                        J'accepte les conditions g√©n√©rales d'adh√©sion <span class="required">*</span>
                    </label>
                    <div class="legal-text">
                        <strong>Conditions g√©n√©rales :</strong><br>
                        ‚Ä¢ L'adh√©sion est valable 1 an √† compter du paiement<br>
                        ‚Ä¢ La cotisation de 15‚Ç¨ n'est pas remboursable sauf cas exceptionnel<br>
                        ‚Ä¢ L'adh√©rent s'engage √† respecter les valeurs et r√®gles de l'association<br>
                        ‚Ä¢ L'association se r√©serve le droit d'exclure un membre en cas de comportement inappropri√©<br>
                        ‚Ä¢ Les donn√©es sont conserv√©es pendant la dur√©e de l'adh√©sion + 3 ans (obligations comptables)
                    </div>
                </div>
            </section>

            <button type="submit" [disabled]="payBtnLoading || adhesionForm.invalid || !checkAgeValid()">
                {{ payBtnText }}
            </button>
        </form>
    </div>
</main>